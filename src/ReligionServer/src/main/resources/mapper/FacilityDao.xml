<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.rss.ReligionServer.dao.FacilityDao">
    <insert id="create" parameterType="com.rss.ReligionServer.model.FacilityModel">
        INSERT religion.tb_facility INTO (`co_name`, `co_number`, `co_description`, `co_url`, `co_kind`, `co_regUserId`, `co_addressId`)
        VALUES (`#{name}`, #{number}, `#{description}`, `#{url}`, #{kind}, #{regUserId}, #{addressId});
    </insert>

    <select id="retrieveById" parameterType="int" resultType="com.rss.ReligionServer.model.FacilityModel">
        select * from tb_facility where `co_id` = #{id};
    </select>

    <select id="retrieveByCate" parameterType="String" resultType="com.rss.ReligionServer.model.FacilityModel">
        select * from tb_facility where `co_kind` = #{kind};
    </select>

    <select id="retrieveByPos" parameterType="com.rss.ReligionServer.model.AddressModel" resultType="com.rss.ReligionServer.model.FacilityModel">
        CASE WHEN #{to} = 0 THEN select * from
    </select>

    <select id="retrieveByName" parameterType="String" resultType="com.rss.ReligionServer.model.FacilityModel">
        select * from tb_facility where `co_name` = #{name};
    </select>

    <update id="update" parameterType="com.rss.ReligionServer.model.FacilityModel">
        UPDATE `tb_facility` SET co_name = #{name}, co_number = #{number}, co_description = #{description}, co_url = #{url}, co_kind = #{kind} WHERE (co_id = #{id});
    </update>

    <delete id="remove" parameterType="int">
        DELETE FROM tb_facility WHERE `co_id` = #{id};
    </delete>
</mapper>